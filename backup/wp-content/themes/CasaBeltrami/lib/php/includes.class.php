<?php
	class includes{
        static $fonts = array(
            'Arvo' => 'http://fonts.googleapis.com/css?family=Arvo',
            'Cousine' => 'http://fonts.googleapis.com/css?family=Cousine',
            'Quattrocento' => 'http://fonts.googleapis.com/css?family=Quattrocento',
            'Wire+One' => 'http://fonts.googleapis.com/css?family=Wire+One',
            'Forum' => 'http://fonts.googleapis.com/css?family=Forum',
            'Patrick+Hand' => 'http://fonts.googleapis.com/css?family=Patrick+Hand',
            'Love+Ya+Like+A+Sister' => 'http://fonts.googleapis.com/css?family=Love+Ya+Like+A+Sister',
            'Loved+by+the+King' => 'http://fonts.googleapis.com/css?family=Loved+by+the+King',
            'Bowlby+One+SC' => 'http://fonts.googleapis.com/css?family=Bowlby+One+SC',
            'Stardos+Stencil' => 'http://fonts.googleapis.com/css?family=Stardos+Stencil',
            'Varela' => 'http://fonts.googleapis.com/css?family=Varela',
            'Lobster+Two' => 'http://fonts.googleapis.com/css?family=Lobster+Two',
            'Hammersmith+One' => 'http://fonts.googleapis.com/css?family=Hammersmith+One',
            'Redressed' => 'http://fonts.googleapis.com/css?family=Redressed',
            'Lekton' => 'http://fonts.googleapis.com/css?family=Lekton',
            'Gravitas+One' => 'http://fonts.googleapis.com/css?family=Gravitas+One',
            'Asset' => 'http://fonts.googleapis.com/css?family=Asset',
            'Goblin+One' => 'http://fonts.googleapis.com/css?family=Goblin+One',
            'Aclonica' => 'http://fonts.googleapis.com/css?family=Aclonica',
            'Didact+Gothic' => 'http://fonts.googleapis.com/css?family=Didact+Gothic',
            'Maiden+Orange' => 'http://fonts.googleapis.com/css?family=Maiden+Orange',
            'Tenor+Sans' => 'http://fonts.googleapis.com/css?family=Tenor+Sans',
            'Jura' => 'http://fonts.googleapis.com/css?family=Jura',
            'Francois+One' => 'http://fonts.googleapis.com/css?family=Francois+One',
            'Paytone+One' => 'http://fonts.googleapis.com/css?family=Paytone+One',
            'Zeyada' => 'http://fonts.googleapis.com/css?family=Zeyada',
            'Monofett' => 'http://fonts.googleapis.com/css?family=Monofett',
            'Caudex' => 'http://fonts.googleapis.com/css?family=Caudex',
            'Montserrat' => 'http://fonts.googleapis.com/css?family=Montserrat',

            /* 18.07.2011 */
            'Oswald' => 'http://fonts.googleapis.com/css?family=Oswald',
            'Sunshiney' => 'http://fonts.googleapis.com/css?family=Sunshiney',
            'Istok+Web' => 'http://fonts.googleapis.com/css?family=Istok+Web',
            'Bowlby+One' => 'http://fonts.googleapis.com/css?family=Bowlby+One',
            'Modern+Antiqua' => 'http://fonts.googleapis.com/css?family=Modern+Antiqua',
            'Give+You+Glory' => 'http://fonts.googleapis.com/css?family=Give+You+Glory',
            'Yeseva+One' => 'http://fonts.googleapis.com/css?family=Yeseva+One',
            'Carme' => 'http://fonts.googleapis.com/css?family=Carme',
            'Gentium+Basic' => 'http://fonts.googleapis.com/css?family=Gentium+Basic',
            'Black+Ops+One' => 'http://fonts.googleapis.com/css?family=Black+Ops+One',
            'Gloria+Hallelujah' => 'http://fonts.googleapis.com/css?family=Gloria+Hallelujah',
            'Delius' => 'http://fonts.googleapis.com/css?family=Delius',
            'Aubrey' => 'http://fonts.googleapis.com/css?family=Aubrey',
            'Ovo' => 'http://fonts.googleapis.com/css?family=Ovo',
            'Leckerli+One' => 'http://fonts.googleapis.com/css?family=Leckerli+One',
            'Tienne' => 'http://fonts.googleapis.com/css?family=Tienne',
            'Varela+Round' => 'http://fonts.googleapis.com/css?family=Varela+Round',
            'Annie+Use+Your+Telescope' => 'http://fonts.googleapis.com/css?family=Annie+Use+Your+Telescope',
            'Nothing+You+Could+Do' => 'http://fonts.googleapis.com/css?family=Nothing+You+Could+Do',
            'Swanky+and+Moo+Moo' => 'http://fonts.googleapis.com/css?family=Swanky+and+Moo+Moo',
            'Lora' => 'http://fonts.googleapis.com/css?family=Lora',

            'Podkova' => 'http://fonts.googleapis.com/css?family=Podkova',
            'Limelight' => 'http://fonts.googleapis.com/css?family=Limelight',
            'Maven+Pro' => 'http://fonts.googleapis.com/css?family=Maven+Pro',
            'Architects+Daughter' => 'http://fonts.googleapis.com/css?family=Architects+Daughter',
            'Open+Sans+Condensed' => 'http://fonts.googleapis.com/css?family=Open+Sans+Condensed',
            'Mako' => 'http://fonts.googleapis.com/css?family=Mako',
            'Muli' => 'http://fonts.googleapis.com/css?family=Muli',
            'Nova+Square' => 'http://fonts.googleapis.com/css?family=Nova+Square',
            'Ruslan+Display' => 'http://fonts.googleapis.com/css?family=Ruslan+Display',
            'Anton' => 'http://fonts.googleapis.com/css?family=Anton',
            'Miltonian' => 'http://fonts.googleapis.com/css?family=Miltonian',
            'Kreon' => 'http://fonts.googleapis.com/css?family=Kreon',
            'Nixie+One' => 'http://fonts.googleapis.com/css?family=Nixie+One',
            'Coda+Caption' => 'http://fonts.googleapis.com/css?family=Coda+Caption',
            'Play' => 'http://fonts.googleapis.com/css?family=Play',
            'Expletus+Sans' => 'http://fonts.googleapis.com/css?family=Expletus+Sans',
            'IM+Fell+French+Canon+SC' => 'http://fonts.googleapis.com/css?family=IM+Fell+French+Canon+SC',
            'Brawler' => 'http://fonts.googleapis.com/css?family=Brawler',
            'Irish+Grover' => 'http://fonts.googleapis.com/css?family=Irish+Grover',
            'PT+Serif+Caption' => 'http://fonts.googleapis.com/css?family=PT+Serif+Caption',
            'PT+Serif' => 'http://fonts.googleapis.com/css?family=PT+Serif',
            'PT+Sans+Narrow' => 'http://fonts.googleapis.com/css?family=PT+Sans+Narrow',
            'Wallpoet' => 'http://fonts.googleapis.com/css?family=Wallpoet',
            'Cedarville+Cursive' => 'http://fonts.googleapis.com/css?family=Cedarville+Cursive',
            'IM+Fell+English+SC' => 'http://fonts.googleapis.com/css?family=IM+Fell+English+SC',
            'Lato' => 'http://fonts.googleapis.com/css?family=Lato',
            'Quattrocento+Sans' => 'http://fonts.googleapis.com/css?family=Quattrocento+Sans',
            'Sniglet' => 'http://fonts.googleapis.com/css?family=Sniglet',
            'Open+Sans' => 'http://fonts.googleapis.com/css?family=Open+Sans',
            'Geo' => 'http://fonts.googleapis.com/css?family=Geo',
            'Anonymous+Pro' => 'http://fonts.googleapis.com/css?family=Anonymous+Pro',
            'News+Cycle' => 'http://fonts.googleapis.com/css?family=News+Cycle',
            'Just+Another+Hand' => 'http://fonts.googleapis.com/css?family=Just+Another+Hand',
            'EB+Garamond' => 'http://fonts.googleapis.com/css?family=EB+Garamond',
            'Dancing+Script' => 'http://fonts.googleapis.com/css?family=Dancing+Script',
            'Shanti' => 'http://fonts.googleapis.com/css?family=Shanti',
            'Metrophobic' => 'http://fonts.googleapis.com/css?family=Metrophobic',
            'Syncopate' => 'http://fonts.googleapis.com/css?family=Syncopate',
            'Crimson+Text' => 'http://fonts.googleapis.com/css?family=Crimson+Text',
            'Orbitron' => 'http://fonts.googleapis.com/css?family=Orbitron',
            'Cuprum' => 'http://fonts.googleapis.com/css?family=Cuprum',
            'Cardo' => 'http://fonts.googleapis.com/css?family=Cardo',
            'Nobile' => 'http://fonts.googleapis.com/css?family=Nobile',
            'Inconsolata' => 'http://fonts.googleapis.com/css?family=Inconsolata',
            'IM+Fell+Double+Pica+SC' => 'http://fonts.googleapis.com/css?family=IM+Fell+Double+Pica+SC',
            'Neuton' => 'http://fonts.googleapis.com/css?family=Neuton',
            'Vollkorn' => 'http://fonts.googleapis.com/css?family=Vollkorn',
            'Indie+Flower' => 'http://fonts.googleapis.com/css?family=Indie+Flower',
            'Special+Elite' => 'http://fonts.googleapis.com/css?family=Special+Elite',
            'Fontdiner+Swanky' => 'http://fonts.googleapis.com/css?family=Fontdiner+Swanky',
            'Crushed' => 'http://fonts.googleapis.com/css?family=Crushed',
            'Bentham' => 'http://fonts.googleapis.com/css?family=Bentham',
            'IM+Fell+Great+Primer+SC' => 'http://fonts.googleapis.com/css?family=IM+Fell+Great+Primer+SC',
            'Coming+Soon' => 'http://fonts.googleapis.com/css?family=Coming+Soon',
            'Merriweather' => 'http://fonts.googleapis.com/css?family=Merriweather',
            'Cabin+Sketch' => 'http://fonts.googleapis.com/css?family=Cabin+Sketch',
            'Tangerine' => 'http://fonts.googleapis.com/css?family=Tangerine',
            'UnifrakturMaguntia' => 'http://fonts.googleapis.com/css?family=UnifrakturMaguntia',
            'Homemade+Apple' => 'http://fonts.googleapis.com/css?family=Homemade+Apple',
            'Molengo' => 'http://fonts.googleapis.com/css?family=Molengo',
            'Walter+Turncoat' => 'http://fonts.googleapis.com/css?family=Walter+Turncoat',
            'Yanone+Kaffeesatz' => 'http://fonts.googleapis.com/css?family=Yanone+Kaffeesatz',
            'Raleway' => 'http://fonts.googleapis.com/css?family=Raleway',
            'Bevan' => 'http://fonts.googleapis.com/css?family=Bevan',
            'PT+Sans+Caption' => 'http://fonts.googleapis.com/css?family=PT+Sans+Caption',
            'Josefin+Slab' => 'http://fonts.googleapis.com/css?family=Josefin+Slab',
            'Rock+Salt' => 'http://fonts.googleapis.com/css?family=Rock+Salt',
            'Kranky' => 'http://fonts.googleapis.com/css?family=Kranky',
            'Covered+By+Your+Grace' => 'http://fonts.googleapis.com/css?family=Covered+By+Your+Grace',
            // Added on 10 mar 2014
            'Forum' => 'http://fonts.googleapis.com/css?family=Forum',
            'Corben' => 'http://fonts.googleapis.com/css?family=Corben',
            'Calligraffitti' => 'http://fonts.googleapis.com/css?family=Calligraffitti',

        );
		static function load_css( ){
            /* admin panel ( options , meta-box ) */
            wp_register_style('settings', get_template_directory_uri() . '/lib/css/settings.css?v=0.2');
            
            wp_register_style('generic-fields', get_template_directory_uri() . '/lib/css/generic-fields.css?v=0.1');
            wp_register_style('meta-box', get_template_directory_uri() . '/lib/css/meta.box.css');
            wp_register_style('ui-slider', get_template_directory_uri() . '/lib/css/ui-slider.css');

            wp_enqueue_style( 'ui-lightness');
            wp_enqueue_style( 'settings' );
            wp_enqueue_style( 'generic-fields' );
            wp_enqueue_style( 'meta-box' );
            wp_enqueue_style( 'ui-slider' );
            wp_enqueue_style('thickbox');
            
            wp_enqueue_style( 'frontend' );
		}

        static function load_js( ){

            if( is_admin() ){
                wp_register_script( 'extra' ,  get_template_directory_uri().'/lib/js/extra.js',array('jquery-ui-slider') );
                wp_enqueue_script( 'jquery-ui-slider' );
                wp_register_script( 'extra' ,  get_template_directory_uri().'/lib/js/extra.js' );
                wp_enqueue_script( 'jquery-ui-sortable' );
                wp_register_script( 'actions', get_template_directory_uri().'/lib/js/actions.js' , array( 'jquery' , 'media-upload' , 'thickbox' ) );
                wp_enqueue_script( 'jquery' );
                wp_enqueue_script('media-upload');
                wp_enqueue_script('thickbox');
                
                wp_register_script( 'autocomplete' ,  get_template_directory_uri().'/lib/js/jquery.autocomplete-min.js' );
                wp_enqueue_script( 'autocomplete' );
                
				wp_register_script( 'meta' ,  get_template_directory_uri().'/lib/js/meta.js' );
                
                wp_register_style('fontello', get_template_directory_uri() . '/css/autoinclude/fontello.css');
                wp_enqueue_style('fontello');

                $siteurl = get_option('siteurl');        

                wp_enqueue_script( 'extra' );
                wp_enqueue_script( 'actions' );
				wp_enqueue_script( 'meta' );
               
            }
		}

        static function get_latest_google_fonts(){

            $transient_key = 'googlefontsSeraliazed';

            // Let's see if we have a cached version of google fonts
            $saved_google_fonts = get_transient($transient_key);

            if ($saved_google_fonts !== false){
                $redGoogleFonts = $saved_google_fonts; 
                $redGoogleFonts['Montserrat'] = 'http://fonts.googleapis.com/css?family=Montserrat';
            }else{
                $googlefontsSeraliazed = wp_remote_get("http://phat-reaction.com/googlefonts.php?format=php"); /*make a request to get latest google fonts*/

                if (!is_wp_error($googlefontsSeraliazed) && isset($googlefontsSeraliazed['body']) && strlen($googlefontsSeraliazed['body'])){ /*if there is no error retrieving the data and the body is not empty*/
                    $fontArray = unserialize($googlefontsSeraliazed['body']);
                    if(is_array($fontArray) && sizeof($fontArray)){

                        $redGoogleFonts = array();
                   
                        foreach ($fontArray as $key => $the_font) {
                            $redGoogleFonts[$the_font['css-name']] = "http://fonts.googleapis.com/css?family=".$the_font['css-name'];
                            
                        }

                        $redGoogleFonts['Montserrat'] = 'http://fonts.googleapis.com/css?family=Montserrat';
                        // Store the result in a transient, expires after 14 days
                            
                        set_transient($transient_key, $redGoogleFonts, 60*60*24*14); /*14 days cache*/ 

                        
                    }else{
                        $redGoogleFonts = self::$fonts; /*get the hardcoded fonts*/
                    }
                }else{ /*if there is a error retrieving fonts*/
                    $redGoogleFonts = self::$fonts; /*get the hardcoded fonts*/
                }
            }
            

            return $redGoogleFonts;
        }

        static function fonts(){
            
            $result = array();
            $redGoogleFonts = self::get_latest_google_fonts();

            foreach( $redGoogleFonts as $title => $url ){
                $result[ $title ] = str_replace( '+' , ' ' , rtrim( $title ) );
            }

            ksort( $result );
            $result = array_merge( array(''   => 'Default'), $result);
            return $result;
        }

	}


?>